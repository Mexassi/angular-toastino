"use strict";var toastino=angular.module("mexassi.toastino",[]);toastino.factory("Toastino",function(t){var s=function(t){this.message="",this.classValue=t,this.position="ts-top-right",this.className="ts-toastino",this.autoDismiss=!1,this.delay=3700,this.observer=null};return s.prototype.registerListener=function(t){this.observer=t},s.prototype.broadcastChanges=function(){this.observer.update instanceof Function&&this.observer.update(this)},s.prototype.manualDismiss=function(){this.autoDismiss=!1},s.prototype.setClass=function(){this.className+=void 0!==this.position&&null!==this.position?" "+this.classValue+" "+this.position:this.classValue},s.prototype.setMessage=function(t){this.setClass(),this.message=t,this.close()},s.prototype.close=function(){if(this.autoDismiss){var s=this;t(function(){s.dismiss()},this.delay)}},s.prototype.clearMessage=function(){this.message=""},s.prototype.dismiss=function(){this.className+=" "+s.DISMISS;var o=this;t(function(){o.broadcastChanges(this)},350)},s.DISMISS="ts-dismiss",s}),toastino.factory("toastinoService",function(t){var s=function(){this.toastinoMessages=[],this.observer=void 0};return s.prototype.registerListener=function(t){this.observer=t},s.prototype.broadcastChanges=function(){void 0!==this.observer&&this.observer.toastChanged instanceof Function||console.error("Cannot toast.")},s.prototype.update=function(s){s instanceof t&&this.remove(s)},s.prototype.remove=function(t){for(var s=0;s<this.toastinoMessages.length;s++)if(t===this.toastinoMessages[s]){this.toastinoMessages.splice(s,1);break}},s.prototype.playAlert=function(){var t=document.getElementById("xyz");void 0!==t&&t.play()},s.prototype.buildToastino=function(s){var o=new t(s.classValue);return void 0!==s.autoDismiss&&(o.autoDismiss=s.autoDismiss),void 0!==s.delay&&(o.delay=s.delay),o.registerListener(this),o.setMessage(s.message),o},s.prototype.popToast=function(t){this.toastinoMessages.unshift(t)},s.prototype.makeDangerToast=function(t,s){this.makeToast({classValue:"alert alert-danger",message:t,autoDismiss:!0},s)},s.prototype.makeWarningToast=function(t,s){this.makeToast({classValue:"alert alert-warning",message:t,autoDismiss:!0},s)},s.prototype.makeSuccessToast=function(t,s){this.makeToast({classValue:"alert alert-success",message:t,autoDismiss:!0},s)},s.prototype.makeInfoToast=function(t,s){this.makeToast({classValue:"alert alert-info",message:t,autoDismiss:!0},s)},s.prototype.makeToast=function(t,s){if(void 0===t.classValue||void 0===t.message)throw new TypeError("The object must have properties: classValue, message");t.delay=s&&"long"===s?7400:3700;var o=this.buildToastino(t);this.popToast(o),this.broadcastChanges()},new s}),toastino.directive("toastino",function(){return{restrict:"E",template:'<div class="ts-container"><div ng-repeat="toast in toastinoController.toastinos" class="alert-dismissible {{toast.className}}"><button type="button" class="close" aria-label="Close" ng-click="toast.dismiss()"><span aria-hidden="true">&times;</span></button>{{toast.message}}</div></div>',controller:function(t){var s=this;s.init=function(){s.toastinos=[],t.registerListener(s),s.toastChanged()},s.toastChanged=function(){s.toastinos=t.toastinoMessages},s.init()},controllerAs:"toastinoController"}}),toastino.controller("toastinoCtrl",function(t){var s=["makeInfoToast","makeSuccessToast","makeWarningToast","makeDangerToast"],o=["Hello I am Angular-toastino","You can use me to display toast messages","Just inject toastinoService in your controller","You can install me via bower install angular-toastino"];this.randomNumber=function(){var t=Math.floor(4*Math.random())+1;return t},this.createToastino=function(){var a=this.randomNumber()-1,e=this;"makeInfoToast"===s[a]?t.makeInfoToast(o[e.randomNumber()-1]):"makeSuccessToast"===s[a]?t.makeSuccessToast(o[e.randomNumber()-1],"long"):"makeWarningToast"===s[a]?t.makeWarningToast(o[e.randomNumber()-1]):"makeDangerToast"===s[a]&&t.makeDangerToast(o[e.randomNumber()-1],"long")}});